(function(t){function e(e){for(var i,a,o=e[0],u=e[1],h=e[2],d=0,l=[];d<o.length;d++)a=o[d],r[a]&&l.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);c&&c(e);while(l.length)l.shift()();return s.push.apply(s,h||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},s=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/vue-sound-spectrum/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("a026"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("SoundSpectrum",{ref:"ss",attrs:{width:"500",height:"100",color:"#FF0000",backgroundColor:"#000000",alpha:"1"}}),n("input",{ref:"thefile",attrs:{type:"file",accept:"audio/*"}}),n("audio",{ref:"audio",attrs:{controls:""}})],1)},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("canvas",{ref:this.id})])},o=[],u=(n("6b54"),n("34ef"),n("ac6a"),n("5df3"),n("10ad"),n("d225")),h=n("b0b4"),c=n("308d"),d=n("6bb5"),l=n("013f"),f=n("4e2b"),v=n("bd86"),g=function(){function t(){Object(u["a"])(this,t),this.queuedEvents={},this.deferedEvents=[],this.listeners={}}return Object(h["a"])(t,[{key:"dispatchQueuedEvents",value:function(t){if(this.queuedEvents.hasOwnProperty(t)&&this.queuedEvents.hasOwnProperty(t)){var e,n=this.queuedEvents[t].slice(0);delete this.queuedEvents[t];while(e=n.pop())this.dispatchEvent(e)}}},{key:"addEventListener",value:function(t,e){if(void 0===t)throw new Error("Event Class is not found.");if(this.listeners.hasOwnProperty(t)||(this.listeners[t]=[]),"function"!=typeof e)throw new Error("Listener is not a function.");this.listeners[t].push(e)}},{key:"cancelDeferredEvents",value:function(){var t;while(t=this.deferedEvents.pop())clearTimeout(t)}},{key:"cancelQueuedEvents",value:function(){for(var t in this.queuedEvents)this.queuedEvents.hasOwnProperty(t)&&delete this.queuedEvents[t]}},{key:"deferEventDispatch",value:function(t,e){var n=this,i=this.deferedEvents.length;this.deferedEvents.push(setTimeout(function(){n.dispatchEvent(t),n.deferedEvents.slice(i,1)},e||1e3))}},{key:"dispatchEvent",value:function(t){if(t.currentTarget=this._currentTarget,this.listeners.hasOwnProperty(t.type)){var e,n,i,r=this.listeners[t.type];for(e=0,n=r.length;e<n;++e)i=r[e],i(t)}this.dispatchQueuedEvents(t.type),null!==this.target&&!0===t.bubbles&&!0===t.canPropagate&&this.target.dispatchEvent(t)}},{key:"getEventListeners",value:function(t){return this.hasEventListener(t)?this.listeners[t]:[]}},{key:"hasEventListener",value:function(t){return!!(this.listeners.hasOwnProperty(t)&&this.listeners[t].length>0)}},{key:"queueEventDispatch",value:function(t,e){this.queuedEvents.hasOwnProperty(t)||(this.queuedEvents[t]=[]),this.queuedEvents[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(this.listeners.hasOwnProperty(t)){var n,i,r=this.listeners[t];for(n=0,i=this.listeners.length;n<i;++n)if(r[n]===e){this.listeners[t].splice(n,1);break}}}},{key:"currentTarget",get:function(){return this._currentTarget},set:function(t){this._currentTarget=t||null}}]),t}();n("456d");(function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),r=window.setTimeout(function(){e(n+i)},i);return t=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})();var p=function(){function t(){Object(u["a"])(this,t),this.renderId=void 0,this._interval=0,this._count=0,this.items={}}return Object(h["a"])(t,[{key:"add",value:function(t,e,n){var i=this;void 0==this.items[e]?this.items[e]=t:!0===n&&console.log("【Ticker Error】"+e+"というインスタンス名は"+this.items[e]+"において使用されています。"),0!==Object.keys(this.items).length&&(this.renderId=window.requestAnimationFrame(function(){i._render()}))}},{key:"kill",value:function(t,e){this.items[t]?delete this.items[t]:!0===e&&console.log("【Ticker Error】"+t+"というインスタンスはリストに登録されていません。"),0===Object.keys(this.items).length&&(window.cancelAnimationFrame(this.renderId),this.renderId=void 0,this.items={})}},{key:"killAll",value:function(){for(var t in this.items)delete this.items[t];this.items={},void 0!=this.renderId&&(window.cancelAnimationFrame(this.renderId),this.renderId=void 0)}},{key:"hasItem",value:function(t){return void 0!=this.items[t]}},{key:"get",value:function(t){return this.items[t]}},{key:"interval",value:function(t){this._interval=Math.max(0,t)}},{key:"_render",value:function(){var t=this;if(this._count++,this._count>this._interval){for(var e in this.items)this.items[e]();this._count=0}Object.keys(this.items).length>=1&&(window.cancelAnimationFrame(this.renderId),this.renderId=window.requestAnimationFrame(function(){t._render()}))}}]),t}(),_=new p,b=function(){function t(){Object(u["a"])(this,t)}return Object(h["a"])(t,[{key:"rgbToHex",value:function(t){return"#"+t.map(function(t){return("0"+t.toString(16)).slice(-2)}).join("")}},{key:"hexToRgb",value:function(t){return"#"===t.substr(0,1)&&(t=t.substr(1,6)),6!==t.length?(console.log("hex should be length 6."),{r:0,g:0,b:0}):{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}}}]),t}(),m=new b,w=function(t){function e(t,n,i,r,s,a){var o;Object(u["a"])(this,e),o=Object(c["a"])(this,Object(d["a"])(e).call(this)),Object(v["a"])(Object(l["a"])(o),"_render",function(){if(void 0!==o._analyser&&void 0!==o._canvas){o._ctx.fillStyle="rgb("+o.rgb.bgr+","+o.rgb.bgg+","+o.rgb.bgb+","+o._alpha+")",o._ctx.fillRect(0,0,o._width,o._height),o._analyser.getByteTimeDomainData(o._dataArray);var t=o.getMax(o._dataArray);o._count=0;for(var e=0;e<o._bufferLength;e++){o._barHeight=o._dataArray[e];var n=o._barHeight/t,i=1-n,r=-(o._height*i+1);o._ctx.fillStyle="rgb("+o.rgb.r+","+o.rgb.g+","+o.rgb.b+","+o._alpha+")",o._ctx.fillRect(o._count,o._height,1,r),o._count++}}}),o._id=(new Date).getTime().toString(16)+Math.floor(1e6*Math.random()).toString(16),o._canvas=void 0!==t?t:void 0,o._width=void 0!==n?n:100,o._height=void 0!==i?i:50,o._color=void 0!==r?r:"#000000",o._backgroundColor=void 0!==s?s:"#FFFFFF",o._alpha=void 0!==a?a:1,o._audio=void 0,o._context=void 0,o._src=void 0,o._analyser=void 0,o._bufferLength=void 0,o._dataArray=void 0,o._barWidth=0,o._barHeight=0,o._count=0,o._ctx=void 0,o.wm=new WeakMap;var h=m.hexToRgb(o._color),f=m.hexToRgb(o._backgroundColor);return o.rgb={r:h.r,g:h.g,b:h.b,bgr:f.r,bgg:f.g,bgb:f.b},o}return Object(f["a"])(e,t),Object(h["a"])(e,[{key:"init",value:function(t){this._audio=t,this._context=new AudioContext,this.wm.has(this._audio)?this._src=this.wm.get(this._audio):(this._src=this._context.createMediaElementSource(this._audio),this.wm.set(this._audio,this._src)),this._analyser=this._context.createAnalyser(),this._src.connect(this._analyser),this._analyser.connect(this._context.destination),this._bufferLength=this._analyser.frequencyBinCount,this._dataArray=new Uint8Array(this._bufferLength),this._barWidth=this._width/this._bufferLength*2.5,this._ctx=this._canvas.getContext("2d")}},{key:"getMax",value:function(t){var e=0;for(var n in t)e<=t[n]&&(e=t[n]);return e}},{key:"start",value:function(){!1===_.hasItem("play_"+this._id)&&_.add(this._render,"play_"+this._id,!1)}},{key:"stop",value:function(){_.kill("play_"+this._id,!1)}},{key:"canvas",get:function(){return this._canvas},set:function(t){this._canvas=t}}]),e}(g),y={data:function(){return{soundSpectrum:void 0,id:(new Date).getTime().toString(16)+Math.floor(1e6*Math.random()).toString(16)}},props:{width:String,height:String,color:String,backgroundColor:String,alpha:String},mounted:function(){var t=this.$refs[this.id];t.width=this.width,t.height=this.height,this.soundSpectrum=new w(t,t.width,t.height,this.color,this.backgroundColor,this.alpha)},methods:{onChange:function(t){this.soundSpectrum.init(t),this.soundSpectrum.start()}}},k=y,E=n("2877"),O=Object(E["a"])(k,a,o,!1,null,null,null),x=O.exports,j={name:"app",components:{SoundSpectrum:x},mounted:function(){var t=this,e=this.$refs["thefile"],n=[],i=this.$refs["audio"];i.loop=!0,e.onchange=function(e){n=e.currentTarget.files,i.src=URL.createObjectURL(n[0]),i.load(),i.play(),t.$refs["ss"].onChange(i)}}},S=j,A=Object(E["a"])(S,r,s,!1,null,null,null),F=A.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(F)}}).$mount("#app")}});
//# sourceMappingURL=app.bffb2322.js.map